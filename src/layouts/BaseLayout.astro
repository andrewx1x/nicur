---
import "../styles/global.css";
import HeaderNav from "../components/HeaderNav.astro";
import FooterContacts from "../components/FooterContacts.astro";
import Container from "../components/Container.astro";
import { site } from "../config/site";

const { title, description, canonical } = Astro.props;
const pageTitle = title ? `${title} | ${site.name}` : site.name;
const pageDescription = description || site.description;
const canonicalUrl = canonical || site.url + Astro.url.pathname;
---
<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle}</title>
    <meta name="description" content={pageDescription} />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="canonical" href={canonicalUrl} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />
    <meta property="og:image" content={`${site.url}/og-image.svg`} />
    <meta property="og:type" content="website" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  </head>
  <body>
    <div class="notice-banner">
      <Container>
        {site.notice}
      </Container>
    </div>
    <HeaderNav currentPath={Astro.url.pathname} />
    <main>
      <slot />
    </main>
    <FooterContacts />
    <script>
      const elements = document.querySelectorAll('.reveal');
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('in-view');
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.15 }
      );
      elements.forEach((element) => observer.observe(element));
    </script>
  </body>
</html>
